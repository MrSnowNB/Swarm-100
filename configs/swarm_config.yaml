---
name: "Granite4 MicroH Swarm Validation"
description: "Validation workflow for Granite4 MicroH Swarm system"
project: granite4-microh-swarm
version: 1.0.0
status: active
created: 2025-10-18

# Hardware Configuration - PHASE 2: Full CA Deployment (25 bots/GPU for 10x10 grid)
# CA-enabled swarm with cellular automata grid mapping
# Expected: 100 total bots (25 Ã— 4 GPUs) for 10x10 CA grid
hardware:
  gpus:
    - id: 0
      name: "RTX 6000 Ada"
      vram_gb: 48
      bots: 25
    - id: 1
      name: "RTX 6000 Ada"
      vram_gb: 48
      bots: 25
    - id: 2
      name: "RTX 6000 Ada"
      vram_gb: 48
      bots: 25
    - id: 3
      name: "RTX 6000 Ada"
      vram_gb: 48
      bots: 25
  total_bots: 100

# Model Configuration
model:
  name: "granite4:micro-h"
  quantization: "Q4"
  context_length: 2048
  temperature: 0.7
  top_p: 0.9
  top_k: 40

# Swarm Architecture
swarm:
  gossip_hops: 4
  fanout: 5
  confidence_threshold: 0.5
  ttl: 4
  # CA Grid Configuration
  grid_width: 10  # CA grid width (bots per row)
  grid_height: 10  # CA grid height (total bots / grid width)

# Bot Configuration
bot:
  base_port: 11400
  api_timeout: 30
  max_retries: 3
  health_check_interval: 60
  startup_grace_period_seconds: 30  # Don't fail bots that haven't had time to init
  launch_stagger_seconds: 2.0  # Delay between bot launches to prevent Ollama connection overload

# Performance Tuning
performance:
  max_concurrent_requests: 10
  batch_size: 1
  num_threads: 4
  gpu_memory_fraction: 0.95
  enable_kv_cache: true

# Logging
logging:
  level: "INFO"
  dir: "logs"
  rotation: "daily"
  retention_days: 7

gates:
  gate1:
    name: "Initial Gate"
    description: "This is the initial validation gate."
    required_success_rate: 100
    steps:
      - name: "Check Hardware Configuration"
        type: "command"
        command: "echo 'Checking hardware configuration...'"
      - name: "Check Model Configuration"
        type: "command"
        command: "echo 'Checking model configuration...'"

# Monitoring
monitoring:
  enable_metrics: true
  metrics_port: 9090
  prometheus_export: false
